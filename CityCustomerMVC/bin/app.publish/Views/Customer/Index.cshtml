@model List<CityCustomerMVC.Models.Customer>
@{
    ViewBag.Title = "Index";
}


<head>
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap.min.css">

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-XNhSYjw5n/8/2UtMO3GUbhFViNrSyzwUssMuDCsAE1UQN8Qm5Y4IvPtzl02OvTzJCgy9gSTjCZLXZCkXpVNPgg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js" integrity="sha512-NxozIh/sApn6TbkqlAbG6Y91H/NTtku2bRtbq5B7Dng9KD7B1vl/QD0io2/fNXw1UZki+/pAfj/vgGxdXzr/2Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- DataTables Bootstrap JS
     <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap.min.js" integrity="sha512-HUXMS2cBem7cUZ/DwRV4kFxE9CqZawGtWheuL/HQI8AV9Y6MWjHBWFRZpK/Z32+qQbZJSdSBCKy9vE1n/7KwzA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css" integrity="sha512-1k7mWiTNoyx2XtmI96o+hdjP8nn0f3Z2N4oF/9ZZRgijyV4omsKOXEnqL1gKQNPy2MTSP9rIEWGcH/CInulptA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.11/css/jquery.dataTables.min.css" integrity="sha512-xo0HhuSoZO2TxkQsrgWtMLLzdXDY+3K9fxENWwNBA1jx51EWtk4oVgKohboPb7HMXxMmulnVhoGR6yBDJL8LzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />   -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.11/js/jquery.dataTables.min.js" integrity="sha512-EGvjXO5LO7V8DWbxg4HLqDQrUvQi7gBi2sBedRLyVWqVFI0qK3oIpBRdyDwYeWkruHOYGWNMlEe5BAKDsUahQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
    <h2>THESE ARE OUR CUSTOMERS</h2>
    <table id="customer" border="1">

        @* <ul id="customerList">  *@

        @foreach (var cust in Model)
        {
            <tr>
                <td> @cust.Name  </td>

                <td> @cust.city.Id </td>
                <td>@cust.DateTime </td>
                @*      <td> @Html.ActionLink("EDIT","EditCustomer","Customer",new { id= cust.Id,id2=cust.city.Id},null)</td>   *@
                @*   <td> a href="@Url.Action("EditCustomer", "Customer", new { id = cust.Id })">Edit</a></td>*@

                <td>
                    <button data-customer-id111="@cust.Id" class="btn-link js-details">SHOW DETAILS</button>
                </td>
            </tr>
        }
        @*  </ul>  *@
    </table>

    @using (Html.BeginForm("NewCustomerForm", "Customer", FormMethod.Get))
    {
        <button type="submit" class="btn btn-lg btn-primary">New Customer Registration</button>
    };

</body>

@section scripts
{
    @*BY THIS FUNCTION THERE WILL BE ONLY 1 HANDLER FNTION FOR ALL
        SHOW DETAILS BUTTON WICH WILL CONSUME LESS MEMORY*@
    <script>
        $(document).ready(function () {

            $("#customer").DataTable();
            $("#customer .js-details").on("click", function () {
                if (confirm("you want to see account details...?")) {
                    $.ajax({
                        url: "/api/customers/" + $(this).attr("data-customer-id111"),
                        method: "get",
                        success: function () {
                            console.log("success");
                        }
                    })
                }
            });
        });
    </script>




    @*<script>

            $(document).ready(function () {
                $("#customer .js-details").on("click", function () {
                    bootbox.confirm("You want to see account details...?", function () {
                        if (result) {
                            $.ajax({
                                url: "/api/customers/" + $(this).attr("data-customer-id111"),
                                method: "GET",
                                success: function () {
                                    console.log("success");
                                }
                            })
                        }
                    })
                });
            });
        </script>*@

    @*<script>
                    $(document).ready(function () {
                        $("#customer .js-details").on("click", function () {
                            var $clickedElement = $(this); // Store reference to the clicked element
                            bootbox.confirm("You want to see account details...?", function (result) { // Pass 'result' parameter
                                if (result) {
                                    $.ajax({
        <script src="~/Scripts/bootstrap.min.js"></script>
                                        url: "/api/customers/" + $clickedElement.attr("data-customer-id111"), // Use stored reference to the clicked element
                                        method: "GET",
                                        success: function () {
                                            console.log("success");
                                        }
                                    });
                                }
                            });
                        });
                    });
                </script>*@




    @*<script>
            $(document).ready(function () {
                $("#customer .js-details").on("click", function () {
                    var $clickedElement = $(this); // Store reference to the clicked element
                    bootbox.confirm("You want to see account details...?", function (result) { // Pass 'result' parameter
                        if (result) {
                            $.ajax({
                                url: "/api/customers/" + $clickedElement.attr("data-customer-id111"), // Use stored reference to the clicked element
                                method: "GET",
                                success: function () {
                                    console.log("success");
                                }
                            });
                        }
                    });
                });
            });
        </script>*@


}








